% Speed-up the compilation with LatexDaemon!!!
\input{pstring-example1.pre}
%


\author{William Blum}
\title{Examples for the pstring package}
\begin{document}
\maketitle
\begin{abstract}
This document shows some examples of justified sequences that you
can generate with the pstring package.
The latest version of the package can be downloaded from %\url{http://william.famille-blum.org/software/latex/index.html}.

\begin{codeexample}[width=4cm]
\Pstr[0.9cm]{ \psi = (n){q^0} \ (n4-n,60){q^1}  \ (n5-n4,60){q^2}
 \  (n8-n,50){q^1} \ (n9-n8,60){q^2}   \ (n10-n,40){q^3}}.
\end{codeexample}

\end{abstract}
\section{Examples of sequences}

A sequence with labels on the links using the succinct syntax:
\begin{codeexample}[width=3cm]
\Pstr[20pt]{\lambda\cdot
(app){@} \cdot  (ly){\lambda y}
\ldots (y-ly,35:1){y} \cdot
(lx-app,38:1){\lambda \overline{x}}
\ldots  (x-lx,30:i){x_i} \cdot
(leta-y,40:i){\lambda \overline{\eta_i}}
{\ldots} }.
\end{codeexample}

The same one with a more cumbersome syntax:
\begin{codeexample}[width=4cm]
\pstr[0.7cm]{
\nd t = \lambda \cdot (app){@} \nd \cdot (ly){\lambda y}
\nd \ldots (y-ly,35:1) {y} \nd \cdot (lx-app,38:1){\lambda \overline{x}}
\nd \ldots (x-lx,30:i){x_i} \nd \cdot (letay-y,40:i){\lambda \overline{\eta_i}}
\txt{\ldots} }.
\end{codeexample}


A sequence with more links
\begin{codeexample}[width=7cm]
\pstr[1cm]{
\nd t_2= (n){\lambda f z}
\nd(n2){@}
\nd(n3-n2,60){\lambda g x}
\nd(n4-n,45){f^{[1]}}
\nd(n5-n4,45){\lambda^{[2]}}
\nd(n6-n3,45){x}{}
\nd(n7-n2,35){\lambda^{[3]}}
\nd(n8-n,35){f^{[4]}}
\nd(n9-n8,45){\lambda^{[5]}}
\nd(n10-n,35){z}}
\end{codeexample}

and the same one with the succinct syntax
\begin{codeexample}[width=7cm]
\Pstr[1cm]{
t_2 = (n){\lambda f z}
(n2){@}
(n3-n2,60){\lambda g x}
(n4-n,45){f^{[1]}}
(n5-n4,45){\lambda^{[2]}}
(n6-n3,45){x}
(n7-n2,35){\lambda^{[3]}}
(n8-n,35){f^{[4]}}
(n9-n8,45){\lambda^{[5]}}
(n10-n,35){z} }.
\end{codeexample}

Two sequences on the same line:
\begin{codeexample}[width=15cm]
\Pstr[0.3cm]{ \psi = (n){q^0}
 (n4-n,60){q^1} \ (n5-n4,60){q^2}
 \  (n8-n,50){q^1} \ (n9-n8,60){q^2}
 \ (n10-n,40){q^3}} \ and
 \ \pstr[0.9cm]{\nd \psi = (n){q^0}
 \nd (n4-n,60){q^1}  \nd\ (n5-n4,60){q^2}
\nd\  (n8-n,50){q^1} \nd\ (n9-n8,60){q^2}
 \nd\ (n10-n,40){q^3} .}
\end{codeexample}

\subsection{An example which does not work in PGF mode}
The next example can only be done using the pstricks engine and using the long syntax. This is due to the use of the
latex command \verb|\overbrace| which embraces several nodes inside the sequence.
This cannot be handled in the PGF rendering mode due to the impossibility to create nodes outside a PGF environment.
It is possible to overcome the problem by using the overlay feature of PGF/Tikz, however overlays seem to work only
within Tikz environment but not in standard PGF ones. Also the use of overlays requires two latex compilations in order to resolve node name references,
and finally, overlays work only with pdflatex (not with latex).
\begin{codeexample}[width=7cm]
\pstr[0.7cm][5pt]{ s = \underbrace{\cdots\ \nd(r){r}^O \cdots }_{s'}
\ \nd(n){n}^P \ \underbrace{\cdots\ \nd(a-r,35){a}^P \cdots }_{u}
\ \nd(m-n,30){m}^O }.
\end{codeexample}

\subsection{Elevation of the links}
A second optional parameter can be passed to \verb|\pstr| in order to elevate the links in the sequence as follows:

\begin{codeexample}[width=5cm]
$\begin{array}{rclrcl}
\mbox{First line} &=& \parbox[t]{8cm}{there should be enough space between the
                        bottom of this line and the arc of the next line.} \\
                s &=& \pstr[28pt][10pt]{ s \cdot \nd(m) m \cdot \ldots \cdot
                       \nd(lmd-m,40) {\lambda\overline{\xi}} }
    \quad \mbox{ the arc is elevated using the raise option of pstr.}
\end{array}$
\end{codeexample}

\subsection{Others}
\begin{codeexample}[width=7cm]
\Pstr[0.8cm]{
t = (n){\lambda f z}\ (n2){@} \ (n3-n2,60){\lambda g x} \ (n4-n,45){f^{[1]}}
\ (n5-n4,45){\lambda^{[2]}} \ (n6-n3,45){x} \ (n7-n2,35){\lambda^{[3]}}
\ (n8-n,35){f^{[4]}} \ (n9-n8,45){\lambda^{[5]}} \ (n10-n,35){z}
}
\qquad
\Pstr[0.9cm]{
t\upharpoonright r = (n){\lambda f z} \ (n4-n,50){f}^{[1]}
\ (n5-n4,60){\lambda}^{[2]} \ (n8-n,45){f}^{[4]}
\ (n9-n8,60){\lambda}^{[5]} \ (n10-n,40){z}}
\end{codeexample}

\begin{codeexample}[width=4cm]
\Pstr[0.8cm]{ {\psi_M(t\upharpoonright r) =\ } (n){q^0}\ (n4-n,60){q^1}\ (n5-n4,60){q^2}
\ (n8-n,45){q^1}\ (n9-n8,60){q^2}\ (n10-n,38){q^3} \in [\![ M ]\!] \ .}
\end{codeexample}

\subsection{Example extracted from an article}
%\begin{codeexample}[width=4cm]
\newcommand{\oview}[1]{\llcorner #1 \lrcorner}
\begin{itemize}
\item[{\bf (InputVar)}] If $t_1 \cdot x \cdot t_2$ is a traversal with
  $x \in N_{var}^{\upharpoonright r}$ and $?(t_1 \cdot x \cdot
  t_2)=?(t_1) \cdot x$ then so is \Pstr[0.4cm]{t_1 \cdot (m){x} \cdot t_2 \cdot (n-m,38:i){n}} for all
  $\lambda$-node $n$ whose parent occurs in $\oview{t_1 \cdot x}$, $n$
  pointing to some occurrence of its parent node in $\oview{t_1 \cdot x}$.

\item[{\bf (Copycat$^@$)}]
  If \Pstr{t \cdot (app){@} \cdot (lz-app,60:0){\lambda \overline{z}}  \ldots  (lzv-lz,60:v){v}_{\lambda \overline{z}} } is a traversal then so is
\Pstr[0.6cm]{t \cdot (app){@} \cdot (lz-app,60){\lambda
\overline{z}} \ldots  (lzv-lz,60:v){v}_{\lambda \overline{z}} \cdot
(appv-app,45:v){v}_@}.

\item[{\bf (Copycat$^\lambda$)}] If \Pstr[0.4cm]{t \cdot \lambda \overline{\xi} \cdot (x){x}  \ldots   (xv-x,50:v){v}_x}
is a traversal then so is \Pstr[0.5cm]{t \cdot (lmd){\lambda
\overline{\xi}} \cdot (x){x}  \ldots  (xv-x,50:v){v}_x  \cdot
(lmdv-lmd,30:v){v}_{\lambda \overline{\xi}} }.

\item[{\bf (Copycat$^{var}$)}] If \Pstr[0.4cm]{t \cdot y \cdot (lmd){\lambda \overline{\xi}}
\ldots (lmdv-lmd,50:v){v}_{\lambda \overline{\xi}} } is a traversal
for some variable $y$ not in $N_{var}^{\upharpoonright r}$ then so
is \Pstr[0.6cm]{t \cdot (y){y} \cdot (lmd){\lambda \overline{\xi}}
\ldots (lmdv-lmd,30:v){v}_{\lambda \overline{\xi}}  \cdot
(vy-y,50:v){v}_y }.
\end{itemize}
%\end{codeexample}
\end{document}
